<a href="/about">About</a>
<div class="divider"></div>
<div class="nav-menu">
    <p>Science</p>
    <menu>
        <a href="/science/chaos-theory/">Chaos Theory</a>
        <a href="/science/collatz-conjecture/">Collatz Conjecture</a>
    </menu>
</div>
<div class="nav-menu">
    <p>History</p>
    <menu>
        <a href="/history/history-of-toilet-paper/">History of Toilet Paper</a>
        <a href="/history/the-phalanx-formation/">The Phalanx Formation</a>
    </menu>
</div>
<div class="nav-menu">
    <p>Tech</p>
    <menu>
        <b>Priv/Sec/Anon</b>
        <a href="/tech/psa/intro/">Intro</a>
        <a href="/tech/psa/messengers">Messengers</a>
        <hr />
        <a href="/tech/google/">Google</a>
        <a href="/tech/be-social">Be Social</a>
    </menu>
</div>
<div class="divider"></div>
<a
    href="https://gallery.zerolimits.dev"
    class="gallery"
    target="_blank"
    title="Aperturic Focus"
>
    <img src="https://gallery.zerolimits.dev/icon/favicon.svg" alt="Favicon" />
</a>
<style lang="scss">
    a {
        text-decoration: none;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.25s;
        color: var(--text);

        font-weight: 550;

        &:hover {
            color: var(--link);
        }
    }

    .nav-menu {
        background-color: transparent;
        position: relative;

        @media (max-width: 768px) {
            padding: 0.5rem 0.1rem;
        }

        p {
            font-weight: 550;
            color: var(--text);
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.25s;
            padding: 0.5rem;
            margin: 0;

            &::after {
                content: "";
                -webkit-mask: url("/svg/dropdown-arrow.svg");
                mask: url("/svg/dropdown-arrow.svg");
                -webkit-mask-size: cover;
                mask-size: cover;
                background-color: var(--text);
                height: 1rem;
                width: 1rem;
                display: inline-block;
                vertical-align: -10%;
                transition: all 0.25s;
            }

            &:hover {
                color: var(--link);

                &::after {
                    background-color: var(--link);
                }
            }
        }

        menu {
            position: absolute;
            background-color: var(--bg);
            color: var(--text);
            border: solid 0.125rem var(--variant);
            margin: 0;
            padding: 0.5rem;
            border-radius: 0.75rem;
            z-index: 9999;
            transition: all 0.25s;
            opacity: 0;
            visibility: hidden;

            b {
                display: block;
                padding: 0.5rem;
                border-radius: 0.5rem;
                transition: all 0.25s;
                color: var(--text);
            }

            @media (max-width: 768px) {
                transform: translate(-90%, -50%);
            }

            @media (min-width: 769px) {
                transform: translate(-25%, -10%);
            }

            a {
                display: block;
                white-space: nowrap;

                &:hover {
                    color: var(--primary-text);
                    background-color: var(--primary-bg);
                }
            }
        }

        &[open] menu {
            opacity: 1;
            visibility: visible;

            @media (max-width: 768px) {
                transform: translate(-100%, -50%);
            }

            @media (min-width: 769px) {
                transform: translate(-25%, 0);
            }
        }
    }

    // Gallery
    .gallery {
        transition-duration: 0.25s;

        @media (max-width: 768px) {
            text-align: center;
        }

        img {
            height: 1.25rem;
            vertical-align: -15%;
        }

        &:hover {
            filter: brightness(75%);
        }
    }

    .divider {
        @media (min-width: 769px) {
            border-left: 2px solid var(--variant);
            height: 1.5rem;
        }

        @media (max-width: 768px) {
            border-left: none;
            border-top: 2px solid var(--variant);
            height: 1px;
        }
    }
</style>

<script>
    let navMenus = document.querySelectorAll(".nav-menu");
    navMenus.forEach((targeted) => {
        if (window.matchMedia("(min-width: 769px)").matches) {
            targeted.addEventListener("mouseover", () => {
                targeted.setAttribute("open", "true");
            });
            targeted.addEventListener("mouseout", () => {
                targeted.removeAttribute("open");
            });
        }

        if (window.matchMedia("(max-width: 768px)").matches) {
            targeted.addEventListener("click", () => {
                targeted.toggleAttribute("open");
                navMenus.forEach((navMenu) => {
                    if (navMenu !== targeted) {
                        navMenu.removeAttribute("open");
                    }
                });
            });

            document.addEventListener("click", (event) => {
                if ((event.target as HTMLElement).closest(".nav-menu")) return;

                navMenus.forEach((navMenu) => {
                    navMenu.removeAttribute("open");
                });
            });
        }
    });
</script>
